import{B as r,C as l,F as g,I as p,J as h,K as f,Na as b,P as I,W as x,Xa as j,Ya as O,e as m,eb as M,h as a,j as s,l as v,p as C,s as c,t as u}from"./chunk-N3QAHXRB.js";var D=(()=>{let e=class e extends b{constructor(t){super(t)}getAll(){let t=this.url("/gags");return this.get(t).pipe(this.defaultMap)}getById(t){let i=this.url("/gag/:id").params({id:t});return this.get(i).pipe(this.defaultMap)}update(t){let i=t.id,n=this.url("/gags/:id").params({id:i});return this.put(n,t)}insert(t){let i=this.url("/gags");return this.post(i,t)}search(t,i){return this.post(this.url("/search").queryParams({page:i}),{q:t}).pipe(this.defaultMap)}author(t,i){return this.post(this.url("/author").queryParams({page:i}),{q:t}).pipe(this.defaultMap)}shared(t){let i=this.url("/shared").queryParams({q:t});return this.get(i).pipe(this.defaultMap)}};e.\u0275fac=function(i){return new(i||e)(s(C))},e.\u0275prov=a({token:e,factory:e.\u0275fac});let o=e;return o})();var w=(()=>{let e=class e{constructor(t){this.api=t,this.page=0}getObjFromData(t){return{id:t.id,content:t.content,author:t.author,location:t.location,origin:t.origin,gag_hash:t.gag_hash,highlight_date:t.highlight_date,used_in:t.used_in,created_at:t.created_at,updated_at:t.updated_at}}searchGag(t){return this.query=t,this.page=0,this.callSearchGagsApi()}getAuthor(t){return this.api.author(t)}nextPage(){return this.page=this.page+1,this.callSearchGagsApi()}callSearchGagsApi(){return this.api.search(this.query,this.page).pipe(m(t=>{this.total=t.total;let i=t.data.map(n=>this.getObjFromData(n));return{total:t.total,content:i}}))}getShared(t){return this.api.shared(t).pipe(m(i=>i.map(n=>this.getObjFromData(n))))}};e.\u0275fac=function(i){return new(i||e)(s(D))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var _=class{constructor(e,d){this._document=d;let t=this._textarea=this._document.createElement("textarea"),i=t.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",t.setAttribute("aria-hidden","true"),t.value=e,t.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(t)}copy(){let e=this._textarea,d=!1;try{if(e){let t=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),d=this._document.execCommand("copy"),t&&t.focus()}}catch{}return d}destroy(){let e=this._textarea;e&&(e.remove(),this._textarea=void 0)}},T=(()=>{let e=class e{constructor(t){this._document=t}copy(t){let i=this.beginCopy(t),n=i.copy();return i.destroy(),n}beginCopy(t){return new _(t,this._document)}};e.\u0275fac=function(i){return new(i||e)(s(x))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var L=(()=>{let e=class e{constructor(t,i){this.clipboard=t,this.toaster=i,console.log(location.origin),console.log(location.href),console.log(location.pathname)}share(){let t=this.item?.id+"-"+this.item?.gag_hash,n=location.origin+"/#"+"/shared?q="+t;this.clipboard.copy(n),this.toaster.success("link copied to clipboard: ["+t+"]")}};e.\u0275fac=function(i){return new(i||e)(u(T),u(j))},e.\u0275cmp=v({type:e,selectors:[["app-gag-item"]],inputs:{item:"item"},standalone:!0,features:[I],decls:13,vars:5,consts:[["header",""],[1,"fa","fa-share-alt","right",3,"click"],["body",""],[1,"content"],[1,"author"],[1,"location"],[1,"date"]],template:function(i,n){i&1&&(r(0,"app-card")(1,"div",0),p(2),r(3,"i",1),g("click",function(){return n.share()}),l()(),r(4,"div",2)(5,"p",3),p(6),l(),r(7,"p",4),p(8),l(),r(9,"p",5),p(10),l(),r(11,"p",6),p(12),l()()()),i&2&&(c(2),f(" #",n.item==null?null:n.item.id," "),c(4),h(n.item==null?null:n.item.content),c(2),f("~ ",n.item==null?null:n.item.author,""),c(2),h(n.item==null?null:n.item.location),c(2),h(n.item==null?null:n.item.highlight_date))},dependencies:[M,O],styles:[".content[_ngcontent-%COMP%]{font-size:16px}.author[_ngcontent-%COMP%]{font-size:14px;text-align:right;font-variant:small-caps}.location[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{font-size:12px;text-align:right}.right[_ngcontent-%COMP%]{float:right;font-size:14px;cursor:pointer}"]});let o=e;return o})();export{D as a,w as b,L as c};
