import{$ as d,Ga as m,Ha as g,Na as b,e as u,h as l,j as n,p as h,wa as f}from"./chunk-N3QAHXRB.js";var v=(()=>{let r=class r extends b{constructor(t){super(t)}getUsers(){let t=this.url("/users");return this.get(t).pipe(this.defaultMap)}getById(t){let e=this.url("/user/:id").params({id:t});return this.get(e).pipe(this.defaultMap)}update(t){let e=t.id,i=this.url("/user/:id").params({id:e});return this.put(i,t)}insert(t){let e=this.url("/users");return this.post(e,t)}getMe(){let t=this.url("/me");return this.get(t).pipe(this.defaultMap)}saveMe(t){let e=this.url("/me");return this.put(e,t).pipe(this.defaultMap)}changePassword(t){let e=this.url("/change-password");return this.put(e,{password:t}).pipe(this.defaultMap)}};r.\u0275fac=function(e){return new(e||r)(n(h))},r.\u0275prov=l({token:r,factory:r.\u0275fac});let s=r;return s})();var w=(()=>{let r=class r{constructor(t,e,i){this.transloco=t,this.datePipe=e,this.api=i}getObjFromData(t){let e=t.loginUser,i=this.transloco.translate("date-format");return{id:t.id,active:t.active,name:t.name,email:e.email,phone_number:t.phone_number,role:t.role,roleName:t.roleName,language:t.language,updated_at:t.updated_at,last_login:this.datePipe.transform(e.last_login,i)}}newUser(){return this.getObjFromData({loginUser:{}})}GetUsers(){return this.api.getUsers().pipe(u(t=>t.map(e=>this.getObjFromData(e))))}GetUserById(t){return this.api.getById(t).pipe(u(e=>this.getObjFromData(e)))}Save(t){return new Promise((e,i)=>{t.id!=null?this.api.update(t).subscribe(a=>e(a.success)):this.api.insert(t).subscribe(a=>{a.success?e(!0):i(a)})})}getMyAccount(){return this.api.getMe().pipe(u(t=>this.getObjFromData(t)))}saveMyData(t){return this.api.saveMe(t)}changePassword(t){return this.api.changePassword(t)}};r.\u0275fac=function(e){return new(e||r)(n(g),n(d),n(v))},r.\u0275prov=l({token:r,factory:r.\u0275fac});let s=r;return s})();var P=(()=>{let r=class r{constructor(t){this.fb=t}formClass(t){return t?{"form-validate":t.touched}:{}}BuildFromInterface(t){let e=[],i=[];return t.forEach(a=>{let o=a.name;e.push(o),a.optional||i.push(o)}),this.Build(e,i)}Build(t,e=[]){let i={};return t.forEach(a=>{i[a]=[""]}),e.forEach(a=>i[a]=["",f.required]),this.fb.group(i)}BuildFromGroup(t){return this.fb.group(t)}setObject(t,e){return Object.keys(t.controls).forEach(a=>t.controls[a].setValue(e[a])),t}getChangedData(t){let e={};return Object.keys(t.controls).forEach(i=>{let a=t.get(i);a!=null&&(a.pristine||(e[i]=a.value))}),e}validate(t){t.markAsTouched();let e=[],i=t.valid,a="";return i?{valid:i,data:this.getChangedData(t)}:(Object.keys(t.controls).forEach(o=>{let c=t.get(o)?.errors??null;c!=null&&(t.get(o)?.setErrors({invalid:!0}),Object.keys(c).forEach(p=>{a+=`${o} is ${p}; <br/>`,e.push({key:o,error:p,data:c[p]})}))}),{valid:i,errors:e,errorString:a})}};r.\u0275fac=function(e){return new(e||r)(n(m))},r.\u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();export{v as a,w as b,P as c};
