import{a as V,b as C,c as R,d as z}from"./chunk-HZNYE656.js";import{$a as v,A as F,B as r,C as a,D as _,E as j,F as p,G,H as q,L,M as O,N as Q,O as D,P as m,Q as x,Xa as A,Z as H,_ as N,_a as y,ab as B,d as I,eb as u,f as T,i as M,l as c,m as P,n as k,o as E,q as g,qa as W,s as l,t as f,y as w,z as s}from"./chunk-N3QAHXRB.js";var $=()=>["btn","label-margin","w-100"],J=(()=>{let e=class e{constructor(){this.debounceTimeMs=500,this.minCharacters=4,this.searchSubject=new I,this.loading=!1,this.updateQuery=new g}ngOnInit(){this.searchSubject.pipe(T(this.debounceTimeMs)).subscribe(i=>{this.updateQuery.emit(i)})}ngOnDestroy(){this.searchSubject.complete()}queryChanged(){this.query&&this.query.length>this.minCharacters&&this.searchSubject.next(this.query)}refresh(){this.updateQuery.emit(this.query)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-search-input"]],inputs:{loading:"loading"},outputs:{updateQuery:"updateQuery"},standalone:!0,features:[m],decls:9,vars:6,consts:[["title","Search","icon","fa-search",3,"loading","showClose"],["actions",""],[1,"transition",3,"click"],[1,"fa","fa-refresh"],[1,"row"],[1,"col-sm-9"],["id","search-input","label","Search",3,"valueChange","value"],[1,"col-sm-3"],["type","primary","caption","Search","icon","fa-search",3,"action"]],template:function(t,n){t&1&&(r(0,"app-window",0)(1,"span",1)(2,"a",2),p("click",function(){return n.refresh()}),_(3,"i",3),a()(),r(4,"div",4)(5,"div",5)(6,"app-input",6),Q("valueChange",function(h){return O(n.query,h)||(n.query=h),h}),a()(),r(7,"div",7)(8,"app-button",8),p("action",function(){return n.refresh()}),a()()()()),t&2&&(s("loading",n.loading)("showClose",!1),l(6),L("value",n.query),l(2),F(x(5,$)))},dependencies:[u,y,v,B]});let o=e;return o})();function ee(o,e){if(o&1&&_(0,"app-gag-item",7),o&2){let S=e.$implicit;s("item",S)}}function te(o,e){if(o&1){let S=j();r(0,"div",4)(1,"app-button",8),p("action",function(){k(S);let t=G();return E(t.nextPage.emit())}),a()()}}var K=(()=>{let e=class e{constructor(i,t){this.clipboard=i,this.toaster=t,this.loading=!1,this.list=[],this.nextPage=new g}share(){let i=this.getLink();this.clipboard.copy(i),this.toaster.success("link copied to clipboard with "+this.list.length+" gags")}getHashes(){return this.list.map(t=>t.id+"-"+t.gag_hash).join(",")}getLink(){return location.origin+"/#"+"/shared?q="+this.getHashes()}};e.\u0275fac=function(t){return new(t||e)(f(R),f(A))},e.\u0275cmp=c({type:e,selectors:[["app-gag-list"]],inputs:{loading:"loading",list:"list",total:"total"},outputs:{nextPage:"nextPage"},standalone:!0,features:[m],decls:7,vars:6,consts:[["icon","fa-search",3,"title","loading","showClose"],["actions","",1,"other-actions"],[1,"fa","fa-share-alt",3,"click"],[1,"row"],[1,"col-sm-12"],[3,"item",4,"ngFor","ngForOf"],["class","col-sm-12",4,"ngIf"],[3,"item"],["icon","fa-forward","caption","Next Page",3,"action"]],template:function(t,n){t&1&&(r(0,"app-window",0)(1,"span",1)(2,"i",2),p("click",function(){return n.share()}),a()(),r(3,"div",3)(4,"div",4),w(5,ee,1,1,"app-gag-item",5),a(),w(6,te,2,0,"div",6),a()()),t&2&&(q("title","",n.total," results found"),s("loading",n.loading)("showClose",!1),l(5),s("ngForOf",n.list),l(),s("ngIf",n.list&&n.total&&n.total>n.list.length))},dependencies:[u,H,N,y,v,z],styles:[".other-actions[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}"]});let o=e;return o})();var U=(()=>{let e=class e{constructor(i){this.service=i,this.loading=!1,this.data=[]}search(i){console.info("searching ",i),this.loading=!0,this.service.searchGag(i).subscribe({next:t=>{this.total=t.total,this.data=t.content,this.loading=!1}})}nextPage(){this.service.nextPage().subscribe({next:i=>{this.data=this.data.concat(i.content)}})}};e.\u0275fac=function(t){return new(t||e)(f(C))},e.\u0275cmp=c({type:e,selectors:[["app-gag-home"]],standalone:!0,features:[D([C,V]),m],decls:2,vars:4,consts:[[3,"updateQuery","loading"],[3,"nextPage","total","loading","list"]],template:function(t,n){t&1&&(r(0,"app-search-input",0),p("updateQuery",function(h){return n.search(h)}),a(),r(1,"app-gag-list",1),p("nextPage",function(){return n.nextPage()}),a()),t&2&&(s("loading",n.loading),l(),s("total",n.total)("loading",n.loading)("list",n.data))},dependencies:[u,J,K]});let o=e;return o})();var X=[{path:"",component:U}];var je=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=P({type:e}),e.\u0275inj=M({imports:[W.forChild(X)]});let o=e;return o})();export{je as GagsModule};
